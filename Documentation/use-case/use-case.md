# Use Case
## Открытее приложения
|№ шага|Действующее лицо|Шаг/Действие|
|-|-|-|
| 1 | Пользователь | Открывает приложение. |
| 2 | Система | Проверяет было ли осущесвлена автаризация до этого, если да то активируется альтернативный сценарий 1, если нет то переводит пользователя в окно "Авторизация". |
| 3 | Пользователь | Заполняет все поля формы авторизации. |
| 4 | Система | Проверяет, использовались ли эти введеные данные для входа. |
| 4.1 | Система | Использовались, то переводит пользователя на окно "Список задач". |
| 4.2 | Система | Нет, проверяет наличее подключения к сети.|
| 4.2.1 | Система | Если подключения нет, то уведомляет об этом пользователя и просит попробовать авторизоватся снова, когда появится подключение. |
| 4.2.2 | Система | Если подключение есть, то отправляет введенные данные для входа на сервер. |
| 4.2.2.1 | Система | Если данные введенные пользователем неверны, то уведомляет пользователя о неверност введенных данных и просит его заполнить форму авторизации еще раз, возвращаясь к шагу 3. |
| 4.2.2.2 | Система | Если данные приняты, то сохраняет данные для последующего входа и переводит пользователя на окно "Список задач". |


### Альтернативный сценарий 1

|№ шага|Действующее лицо|Шаг/Действие|
|-|-|-|
| 3 | Система | Просит пользователя ввести PIN-код. |
| 4 | Пользователь | Вводит PIN-код. |
| 5 | Система | Проверяет правельность введеного PIN-код. Если их меньше 3, просет ввести PIN-код еще раз и переходт на шаг 4.  |
| 5.1 | Система | Если PIN-код введен верно, то переводит пользователя на окно "Список задач". |
| 5.2 | Система | Если PIN-код введен не верно, то уведомляет пользователя об этом, предупредив, что если ввести PIN-код неверно 3 раза подряд, то возможность входа по PIN-коду станет недоптупной, проверяет количество попыток вводв PIN-код. |
| 5.2.1 | Система | Если попыток ввести PIN-код меньше 3, просет ввести его еще раз и возвращается на шаг 4. |
| 5.2.2 | Система | Есле попыток было больше 3, то уведомляет пользователя об этом, и переходит на шаг 3 основного сценария. |

## Синхронизация данных

|№ шага|Действующее лицо|Шаг/Действие|
|-|-|-|
| 1 | Пользователь | Нажимает на кнопку "Синхронизация с сервером". |
| 2 | Система | Проверяет наличее сети, если ее нет, уведомляет пользователя о невозможности синхронизации, если есть, то проверяется версию данных на сервере, если она совподает с локальной, то загружает на сервер свои данные. Если версии локальная и серверная версии отличаются, то уведоиляет пользователя об этом и просит выбрать, хочет ли он загрузить свои данны на сервер, или выгрузить данные с него. |
| 3 | Пользователь | Выбирает способ синхронизации | 
| 4 | Система | Производит синхронизацию данных с сервером согласно выбору пользователя. |

## Создание задачи/редактирование задачи 

|№ шага|Действующее лицо|Шаг/Действие|
|-|-|-|
| 1 | Пользователь | Нажимает на кнопку добавить задачу/ редактирование задачи |
| 2 | Система | Переводит пользователя на окно "Форма редактирования задач", при этом блокируя доступ к взаимодействию с окном "Список задач"/"Диаграмма Ганта"|
| 3 | Пользователь | Заполняет все поля, нажимает кнопку сохранить данные |
| 4 | Система | Проверяет, заполнел ли пользователь все поля обезательные поля |
| 4.1 | Система | Если есть незаполнные поля, уведомляет об этом пользователя, просит заполнить их. Возвращаемся к 3 шагу. |
| 4.2 | Система | Если все обезательные поля заполнены, то сохраняет все введенные данные. |
| 5 | Пользователь | Нажимает на кнопку "Закрытее окна" |
| 6 | Система | Закрывает окно "Форма редактирования задач", при этом снимает блокировку доступа на взаимодействия с окном "Список задач"/"Диаграмма Ганта"|

Если пользователь закрывает приложения находясь в окне редактирования, то все несохраненные данные будут утерены.

## Удаление серваер 

|№ шага|Действующее лицо|Шаг/Действие|
|-|-|-|
| 1 | Пользователь | В настройках нажимает на кнопку удалить сервер. |
| 2 | Система | Проверяет является удаляемый сервер основным (nextcloud). |
| 2.1 | Система | Если удаляемый сервер основной, то уведомляет пользователя о невозможности его удаления. |
| 2.2 | Система | Если удаляемый сервер не является основным, то проверяет, является ли он активным. |
| 2.2.1 | Система | Если сервер активен, то уведомляет пользователя о возможной потере данных и просит его перед удалением синхронехировать данные и сменить активный сервер.|
| 2.2.2 | Система | Если удаляемый сервер не является активным, то удаляет все имеющиеся данные, связанные с данным сервером и обновляет комбобокс. |


## Добавление сервера

|№ шага|Действующее лицо|Шаг/Действие|
|-|-|-|
| 1 | Пользователь | В окне настроек вводит логин и пароль от нового сервера и нажимает кнопку подключить. |
| 2 | Система |  Проверяет наличее подключения к сети. |
| 2.1 | Система | Если подключения нет, то уведомляет об этом пользователя и просит попробовать подключить сервер снова, когда появится подключение. |
| 2.2 | Система | Если подключение есть, то отправляет введенные данные для входа на сервер. |
| 2.2.1 | Система | Если данные введенные пользователем неверны, то уведомляет пользователя о неверност введенных данных и просит проверить правельность введенных данных и попробовать снова, возвращаясь к шагу 1. |
| 2.2.2 | Система | Если данные приняты, то сохраняет их для подключения, производит загрузку данных с подключенного сервера и обнавляет комбобокс. |

## Удаление задачи
Проверяет, имет ли удаляемая задача подзадачи, если да то запускается альтернативный сценарий
|№ шага|Действующее лицо|Шаг/Действие|
|-|-|-|
| 1 | Пользователь | Нажимает на кнопку "Удалить задчу". |
| 2 | Система | Уведомляет пользователя о потере данных и просит подтвердить действия |
| 3 | Пользователь | Подтверждает свой выбор. |
| 4 | Система | Проверяет, имет ли удаляемая задача подзадачи. |
| 4.1 | Система | Если подзадач нет, то удаляет эту задачу.|
| 4.2 | Система | Если подзадачи имеются, то уведомляет об этом, предупреждает о возможной потери данных и просит подтвердить действия |
| 5 | Пользователь | Подтверждает удаление или отменяет его. |
| 6 | Система | Если пльзователь подтердил удаление, то удаляет эту задачу и все связанные подзадачи. |



