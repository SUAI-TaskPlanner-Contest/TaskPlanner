# Use Case
## Открытие приложения

|№ шага| Действующее лицо | Шаг/Действие|
|-|-|-|
| 1 | Пользователь | Открывает приложение. |
| 2 | Система | Проверяет была ли осуществлена авторизация до этого, если да, то активируется альтернативный сценарий 1, если нет, то переводит Пользователя в окно "Авторизация". |
| 3 | Пользователь | Заполняет все поля формы авторизации. |
| 4 | Система | Проверяет - использовались ли эти введённые данные для входа. |
| 4.1 | Система | Использовались - переводит Пользователя на окно "Список задач". |
| 4.2 | Система | Нет - проверяет наличие подключения к сети. |
| 4.2.1 | Система | Если подключения нет, то открывает окно "Предупреждение" с просьбой попробовать авторизоваться снова, когда появится подключение. |
| 4.2.2 | Система | Если подключение есть, то отправляет введенные данные для входа на сервер. |
| 4.2.2.1 | Система | Если введенные Пользователем данные неверны, то открывает окно "Предупреждение" с просьбой заполнить форму авторизации еще раз, возвращаясь к шагу 3. |
| 4.2.2.2 | Система | Если данные приняты, то сохраняет данные для последующего входа и переводит Пользователя на окно "Список задач". |

### Альтернативный сценарий 1

|№ шага | Действующее лицо | Шаг/Действие|
|-|-|-|
| 3 | Система | Просит Пользователя ввести PIN-код. |
| 4 | Пользователь | Вводит PIN-код. |
| 5 | Система | Проверяет введённый PIN-код. |
| 5.1 | Система | Если PIN-код введен верно, то переводит Пользователя на окно "Список задач". |
| 5.2 | Система | Если PIN-код введен неверно, то открывает окно "Предупреждение" с сообщением о том, что если ввести PIN-код неверно 3 раза подряд, то возможность входа по PIN-коду станет недоступной и Пользователю придется вводить логин и пароль для авторизации. |
| 5.2.1 | Система | Если попыток ввести PIN-код меньше 3, просит ввести PIN-код еще раз и возвращается на шаг 4. |
| 5.2.2 | Система | Если попыток было больше 3, то открывает окно "Предупреждение" с сообщением, что вход теперь возможен только через логин и пароль, и переходит на шаг 3 основного сценария. |

## Синхронизация данных

Пользователь находится в окне "Список задач"

|№ шага|Действующее лицо|Шаг/Действие|
|-|-|-|
| 1 | Пользователь | Нажимает на кнопку "Синхронизация с сервером". |
| 2 | Система | Проверяет наличие поключения к сети. |
| 2.1 | Система | Если подключения нет, то открывает окно "Предупреждение" о невозможности синхронизации. |
| 2.1 | Система | Если подключение есть, то проверяет версию данных на сервере. |
| 2.1.1 | Система | Если версия совпадает с локальной, то загружает на сервер свои данные. |
| 2.1.2 | Система | Если локальная и серверная версии отличаются, то открывает окно "Предупреждение" с уведомлением об этом и производит синхронизацию данных с сервером согласно выбранному Пользователем приоритету. |

## Создание задачи/редактирование задачи 

Пользователь находится в окне "Список задач"

|№ шага|Действующее лицо|Шаг/Действие|
|-|-|-|
| 1 | Пользователь | Нажимает на кнопку "Добавить задачу" или "Редактирование задачи" |
| 2 | Система | Переводит Пользователя на окно "Форма редактирования задач", при этом блокируя доступ к взаимодействию с окном "Список задач"/"Диаграмма Ганта"|
| 3 | Пользователь | Заполняет все поля, нажимает кнопку "Сохранить данные". |
| 4 | Система | Проверяет, заполнил ли Пользователь все обязательные поля. |
| 4.1 | Система | Если есть незаполненные поля, открывает окно "Предупреждение" с уведомлением об этом и просьбой заполнить их. Возвращение к 3 шагу. |
| 4.2 | Система | Если все обязательные поля заполнены, то сохраняет все введенные данные. |
| 5 | Пользователь | Нажимает на кнопку "Закрыть окно". |
| 6 | Система | Закрывает окно "Форма редактирования задач", при этом снимает блокировку доступа на взаимодействия с окном "Список задач"/"Диаграмма Ганта". |

Если Пользователь закрывает приложение, находясь в окне редактирования, то все несохраненные данные будут утеряны.

## Удаление сервера 

Пользователь находится в окне "Настройки"

|№ шага|Действующее лицо|Шаг/Действие|
|-|-|-|
| 1 | Пользователь | Нажимает на кнопку "Удалить сервер". |
| 2 | Система | Проверяет является ли удаляемый сервер основным (nextcloud). |
| 2.1 | Система | Если удаляемый сервер основной, то открывает окно "Предупреждение" с уведомлением Пользователя о невозможности удаления сервера. |
| 2.2 | Система | Если удаляемый сервер не является основным, то проверяет, является ли он активным. |
| 2.2.1 | Система | Если сервер активен, то открывает окно "Предупреждение" с уведомлением Пользователя о возможной потере данных и просьбой перед удалением синхронизировать данные и сменить активный сервер.|
| 2.2.2 | Система | Если удаляемый сервер не является активным, то удаляет все имеющиеся данные, связанные с данным сервером и обновляет комбобокс. |


## Добавление сервера

Пользователь находится в окне "Настройки"

|№ шага|Действующее лицо|Шаг/Действие|
|-|-|-|
| 1 | Пользователь | Вводит логин и пароль от нового сервера и нажимает кнопку "Подключить". |
| 2 | Система | Проверяет наличие подключения к сети. |
| 2.1 | Система | Если подключения нет, то открывает окно "Предупреждение" с уведомлением об отсутствии подключения и просьбой попробовать подключить сервер снова, когда появится подключение. |
| 2.2 | Система | Если подключение есть, то отправляет введенные данные для входа на сервер. |
| 2.2.1 | Система | Если введенные Пользователем данные неверны, то открывает окно "Предупреждение" с уведомленем для Пользователя о неверности введенных данных и просьбой проверить правильность введенных данных и попробовать снова, возвращаясь к шагу 1. |
| 2.2.2 | Система | Если данные приняты, то сохраняет их для подключения, производит загрузку данных с подключенного сервера и обновляет комбобокс. |

## Удаление задачи

Пользователь находится в окне "Список задач".

|№ шага|Действующее лицо|Шаг/Действие|
|-|-|-|
| 1 | Пользователь | Нажимает на кнопку "Удалить задачу". |
| 2 | Система | Проверяет, имеет ли удаляемая задача подзадачи. |
| 2.1 | Система | Если подзадач нет, то удаляет эту задачу. |
| 2.2 | Система | Если подзадачи имеются, то открывает окно "Предупреждение" с предупреждением о возможной потери данных и просьбой подтвердить действие. |
| 3 | Пользователь | Подтверждает удаление или отменяет его. |
| 4 | Система | Если Пользователь подтвердил удаление, то удаляет эту задачу и все связанные подзадачи. |
